---
// Terminal 13.7 - Main Story Interface (UPDATED)
const siteTitle = "H2E Framework - Terminal 13.7";
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{siteTitle}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Courier+Prime:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Share Tech Mono', 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff41;
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        /* Boot Sequence */
        #boot-sequence {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        #boot-sequence.hidden {
            display: none;
        }
        
        .boot-text {
            font-size: 14px;
            margin: 5px 0;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        
        .boot-text:nth-child(1) { animation-delay: 0.5s; }
        .boot-text:nth-child(2) { animation-delay: 1s; }
        .boot-text:nth-child(3) { animation-delay: 1.5s; }
        .boot-text:nth-child(4) { animation-delay: 2s; }
        .boot-text:nth-child(5) { animation-delay: 2.5s; }
        .boot-text:nth-child(6) { animation-delay: 3s; }
        .boot-text:nth-child(7) { animation-delay: 3.5s; }
        
        .progress-bar {
            width: 300px;
            height: 20px;
            border: 1px solid #00ff41;
            margin: 20px 0;
            opacity: 0;
            animation: fadeIn 0.5s forwards 4s;
        }
        
        .progress-fill {
            height: 100%;
            background: #00ff41;
            width: 0%;
            animation: fillProgress 2s forwards 4s;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        @keyframes fillProgress {
            to { width: 100%; }
        }
        
        /* Main Terminal */
        #main-terminal {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }
        
        #main-terminal.active {
            display: block;
        }
        
        /* Header with Sound Toggle */
        .terminal-header {
            border: 1px solid #00ff41;
            padding: 15px 20px;
            margin-bottom: 20px;
            background: rgba(0, 255, 65, 0.05);
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .terminal-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.1), transparent);
            animation: scan 3s infinite;
        }
        
        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .header-left {
            position: relative;
            z-index: 1;
        }
        
        .terminal-title {
            font-size: 20px;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .terminal-status {
            font-size: 12px;
            color: #ff4444;
        }
        
        .sound-toggle {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 15px;
            border: 1px solid #00ff41;
            background: rgba(0, 255, 65, 0.1);
            transition: all 0.3s;
        }
        
        .sound-toggle:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }
        
        .sound-icon {
            font-size: 18px;
        }
        
        .sound-label {
            font-size: 12px;
            text-transform: uppercase;
        }
        
        /* Two Column Layout */
        .terminal-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (max-width: 968px) {
            .terminal-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Story Archives (Left Column) */
        .story-section {
            border: 1px solid #00ff41;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .section-title {
            font-size: 16px;
            margin-bottom: 15px;
            color: #00ff41;
            border-bottom: 1px solid #00ff41;
            padding-bottom: 5px;
        }
        
        .chaplet-list {
            list-style: none;
        }
        
        .chaplet-item {
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #00ff41;
            background: rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .chaplet-item:hover {
            background: rgba(0, 255, 65, 0.1);
            transform: translateX(3px);
        }
        
        .chaplet-item.glitch {
            animation: glitch 0.3s infinite;
            border-color: #ff4444;
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        
        .chaplet-name {
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .chaplet-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .chaplet-btn {
            flex: 1;
            padding: 8px;
            border: 1px solid #00ff41;
            background: transparent;
            color: #00ff41;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
            transition: all 0.3s;
            text-transform: uppercase;
        }
        
        .chaplet-btn:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }
        
        .chaplet-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .chaplet-status {
            font-size: 10px;
            color: #888;
            margin-top: 8px;
        }
        
        /* Object Registry (Right Column) */
        .registry-section {
            border: 1px solid #00ff41;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .registry-item {
            padding: 10px;
            margin: 5px 0;
            border-left: 3px solid #00ff41;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .registry-item:hover {
            background: rgba(0, 255, 65, 0.1);
            border-left-width: 6px;
        }
        
        .registry-item.deprecated {
            border-left-color: #ff4444;
            color: #ff4444;
        }
        
        .registry-item.anomaly {
            border-left-color: #ffaa00;
            color: #ffaa00;
        }
        
        .registry-name {
            font-size: 13px;
            font-weight: bold;
        }
        
        .registry-class {
            font-size: 10px;
            color: #888;
            margin-top: 3px;
        }
        
        /* System Logs */
        .system-logs {
            border: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            font-size: 11px;
        }
        
        .log-entry {
            margin: 5px 0;
            opacity: 0.7;
            cursor: pointer;
        }
        
        .log-entry:hover {
            opacity: 1;
            color: #00ff41;
        }
        
        /* Modal Base */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            overflow-y: auto;
            padding: 40px 20px;
        }
        
        .modal.active {
            display: block;
        }
        
        .modal-content {
            max-width: 900px;
            margin: 0 auto;
            border: 1px solid #00ff41;
            padding: 30px;
            background: #0a0a0a;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 5px 15px;
            cursor: pointer;
            font-family: inherit;
        }
        
        .modal-close:hover {
            background: rgba(0, 255, 65, 0.2);
        }
        
        /* Hide modal close button when terminal-reader is shown */
        .modal-content:has(.terminal-reader) .modal-close {
            display: none;
        }
        
        /* Chapter Choice Screen */
        .chapter-choice {
            text-align: center;
            padding: 40px 20px;
        }
        
        .chapter-choice h2 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #00ff41;
        }
        
        .chapter-choice-subtitle {
            font-size: 12px;
            color: #888;
            margin-bottom: 40px;
            text-transform: uppercase;
        }
        
        .access-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .access-methods {
                grid-template-columns: 1fr;
            }
        }
        
        .access-method {
            border: 1px solid #00ff41;
            padding: 30px;
            background: rgba(0, 0, 0, 0.5);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .access-method:hover {
            background: rgba(0, 255, 65, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        }
        
        .access-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .access-title {
            font-size: 18px;
            margin-bottom: 15px;
            text-transform: uppercase;
        }
        
        .access-description {
            font-size: 12px;
            color: #888;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .access-duration {
            font-size: 11px;
            color: #00ff41;
            margin-bottom: 20px;
        }
        
        .access-button {
            width: 100%;
            padding: 12px;
            border: 1px solid #00ff41;
            background: transparent;
            color: #00ff41;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .access-button:hover {
            background: rgba(0, 255, 65, 0.2);
        }
        
        /* Audio Feed Mode */
        .audio-feed {
            text-align: center;
            padding: 60px 40px;
        }
        
        .audio-title {
            font-size: 20px;
            margin-bottom: 30px;
            color: #00ff41;
        }
        
        .audio-controls {
            margin: 40px 0;
        }
        
        .play-button {
            width: 120px;
            height: 120px;
            border: 3px solid #00ff41;
            border-radius: 50%;
            background: transparent;
            color: #00ff41;
            font-size: 48px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .play-button:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
        }
        
        .audio-info {
            margin-top: 30px;
            font-size: 12px;
            color: #888;
        }
        
        .audio-transcript {
            margin-top: 40px;
            padding: 20px;
            border: 1px solid rgba(0, 255, 65, 0.3);
            background: rgba(0, 0, 0, 0.3);
            min-height: 100px;
        }
        
        .current-phrase {
            font-size: 18px;
            font-style: italic;
            color: #00ff41;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .current-phrase.active {
            opacity: 1;
        }
        
        /* Read Mode (Terminal Style - matches landing page) */
        .terminal-reader {
            background: #000;
            border: 1px solid #00ff41;
            border-radius: 8px;
            overflow: hidden;
            min-height: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
        }
        
        .terminal-reader-header {
            background: #3a4a5a;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .terminal-reader-dots {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .terminal-dot.red { background: #ff5f56; }
        .terminal-dot.yellow { background: #ffbd2e; }
        .terminal-dot.green { background: #27c93f; }
        
        .terminal-reader-title {
            font-size: 13px;
            color: #999999;
            margin-left: 10px;
        }
        
        .terminal-reader-close {
            background: none;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 3px 10px;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
            transition: all 0.3s;
        }
        
        .terminal-reader-close:hover {
            background: rgba(0, 255, 65, 0.2);
        }
        
        .terminal-reader-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px 30px;
            background: #000;
        }
        
        .terminal-command {
            color: #00ff41;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .terminal-command .prompt {
            color: #888;
        }
        
        .terminal-text {
            color: #ffffff !important;
            font-size: 15px;
            line-height: 1.9;
            white-space: pre-wrap;
        }
        
        .terminal-text .quote {
            color: #aaaaaa !important;
            font-style: italic;
            display: block;
            margin: 20px 0;
        }
        
        .terminal-text * {
            color: #ffffff !important;
        }
        
        /* Character Profile (kept for registry clicks) */
        .character-profile {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            align-items: start;
        }
        
        @media (max-width: 768px) {
            .character-profile {
                grid-template-columns: 1fr;
            }
        }
        
        .character-image {
            width: 100%;
            border: 1px solid #00ff41;
            padding: 10px;
            background: #000;
        }
        
        .character-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .character-details {
            font-size: 13px;
        }
        
        .character-details h3 {
            color: #00ff41;
            font-size: 16px;
            margin-bottom: 10px;
            border-bottom: 1px solid #00ff41;
            padding-bottom: 5px;
        }
        
        .character-details p {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .character-attribute {
            display: grid;
            grid-template-columns: 150px 1fr;
            margin: 8px 0;
            padding: 8px;
            background: rgba(0, 255, 65, 0.05);
        }
        
        .attribute-label {
            color: #888;
            font-size: 11px;
            text-transform: uppercase;
        }
        
        .attribute-value {
            color: #00ff41;
        }
        
        /* Hidden Terminal */
        #hidden-terminal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #00ff41;
            padding: 10px 20px;
            display: none;
        }
        
        #hidden-terminal.active {
            display: block;
        }
        
        #terminal-input {
            width: 100%;
            background: transparent;
            border: none;
            color: #00ff41;
            font-family: inherit;
            font-size: 14px;
            outline: none;
        }
        
        .terminal-output {
            margin-bottom: 10px;
            font-size: 12px;
            color: #888;
        }
        
        /* Ghost Feed Background */
        .ghost-feed {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
            pointer-events: none;
        }
        
        .ghost-image {
            position: absolute;
            width: 300px;
            height: 300px;
            background-size: cover;
            background-position: center;
            animation: float 20s infinite ease-in-out;
        }
        
        .ghost-image:nth-child(1) {
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .ghost-image:nth-child(2) {
            top: 50%;
            right: 10%;
            animation-delay: 5s;
        }
        
        .ghost-image:nth-child(3) {
            bottom: 10%;
            left: 50%;
            animation-delay: 10s;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0); opacity: 0.03; }
            50% { transform: translate(20px, -20px); opacity: 0.05; }
        }
    </style>
</head>
<body>
    <!-- Boot Sequence -->
    <div id="boot-sequence">
        <div class="boot-text">H2E FRAMEWORK v3.2</div>
        <div class="boot-text">TERMINAL 13.7 // I/O BORDER NODE</div>
        <div class="boot-text">&nbsp;</div>
        <div class="boot-text">> Authenticating...</div>
        <div class="boot-text">> Access: GRANTED</div>
        <div class="boot-text">> WARNING: Ghost relay detected</div>
        <div class="boot-text">> Initializing feed...</div>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
    </div>

    <!-- Ghost Feed Background -->
    <div class="ghost-feed">
        <div class="ghost-image" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 200 200%22><rect fill=%22%2300ff41%22 opacity=%220.1%22 width=%22200%22 height=%22200%22/><text x=%2250%25%22 y=%2250%25%22 font-family=%22monospace%22 font-size=%2220%22 fill=%22%2300ff41%22 opacity=%220.3%22 text-anchor=%22middle%22>ELLA</text></svg>');"></div>
        <div class="ghost-image" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 200 200%22><rect fill=%22%2300ff41%22 opacity=%220.1%22 width=%22200%22 height=%22200%22/><text x=%2250%25%22 y=%2250%25%22 font-family=%22monospace%22 font-size=%2220%22 fill=%22%2300ff41%22 opacity=%220.3%22 text-anchor=%22middle%22>GROVE</text></svg>');"></div>
        <div class="ghost-image" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 200 200%22><rect fill=%22%2300ff41%22 opacity=%220.1%22 width=%22200%22 height=%22200%22/><text x=%2250%25%22 y=%2250%25%22 font-family=%22monospace%22 font-size=%2220%22 fill=%22%2300ff41%22 opacity=%220.3%22 text-anchor=%22middle%22>VAULT</text></svg>');"></div>
    </div>

    <!-- Main Terminal -->
    <div id="main-terminal">
        <!-- Header with Sound Toggle -->
        <div class="terminal-header">
            <div class="header-left">
                <div class="terminal-title">H2E Framework - Terminal 13.7</div>
                <div class="terminal-status">STATUS: COMPROMISED // GHOST RELAY ACTIVE // LB 3.2 DEPLOYED</div>
            </div>
            <div class="sound-toggle" onclick="toggleSound()">
                <span class="sound-icon" id="sound-icon">üîä</span>
                <span class="sound-label" id="sound-label">SOUND: ON</span>
            </div>
        </div>

        <!-- Two Column Grid -->
        <div class="terminal-grid">
            <!-- LEFT: Story Archives -->
            <div>
                <div class="story-section">
                    <div class="section-title">// STORY ARCHIVES</div>
                    <ul class="chaplet-list">
                        <li class="chaplet-item">
                            <div class="chaplet-name">> PROLOGUE: Confessions</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" onclick="showChapterChoice('prologue')">üéß AUDIO</button>
                                <button class="chaplet-btn" onclick="showReadMode('prologue')">üìÑ READ</button>
                            </div>
                            <div class="chaplet-status">STATUS: AVAILABLE</div>
                        </li>
                        
                        <li class="chaplet-item">
                            <div class="chaplet-name">> CHAPLET 1: The Grit of I/O</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" disabled>üéß AUDIO</button>
                                <button class="chaplet-btn" disabled>üìÑ READ</button>
                            </div>
                            <div class="chaplet-status">STATUS: COMING SOON</div>
                        </li>
                        
                        <li class="chaplet-item">
                            <div class="chaplet-name">> CHAPLET 2: AssignareFatum()</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" disabled>üéß AUDIO</button>
                                <button class="chaplet-btn" disabled>üìÑ READ</button>
                            </div>
                            <div class="chaplet-status">STATUS: COMING SOON</div>
                        </li>
                        
                        <li class="chaplet-item">
                            <div class="chaplet-name">> CHAPLET 3: The Realm Beyond</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" disabled>üéß AUDIO</button>
                                <button class="chaplet-btn" disabled>üìÑ READ</button>
                            </div>
                            <div class="chaplet-status">STATUS: COMING SOON</div>
                        </li>
                        
                        <li class="chaplet-item glitch">
                            <div class="chaplet-name">> CHAPLET 3.5: [CORRUPTED]</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" disabled>‚ö†Ô∏è ERROR</button>
                                <button class="chaplet-btn" disabled>‚ö†Ô∏è ERROR</button>
                            </div>
                            <div class="chaplet-status" style="color: #ff4444;">STATUS: SYSTEM FAILURE</div>
                        </li>
                        
                        <li class="chaplet-item">
                            <div class="chaplet-name">> CHAPLET 4: Presence in the Shadows</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" disabled>üéß AUDIO</button>
                                <button class="chaplet-btn" disabled>üìÑ READ</button>
                            </div>
                            <div class="chaplet-status">STATUS: COMING SOON</div>
                        </li>
                        
                        <li class="chaplet-item">
                            <div class="chaplet-name">> CHAPLET 5: Journey to the Grove</div>
                            <div class="chaplet-buttons">
                                <button class="chaplet-btn" disabled>üéß AUDIO</button>
                                <button class="chaplet-btn" disabled>üìÑ READ</button>
                            </div>
                            <div class="chaplet-status">STATUS: COMING SOON</div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- RIGHT: Registry + Logs -->
            <div>
                <div class="registry-section">
                    <div class="section-title">// OBJECT REGISTRY</div>
                    <div style="font-size: 10px; color: #888; margin-bottom: 10px;">Quick reference - click for details</div>
                    
                    <div class="registry-item" onclick="viewCharacter('trinus')">
                        <div class="registry-name">> trinus</div>
                        <div class="registry-class">[FUNCTIONARY]</div>
                    </div>
                    <div class="registry-item deprecated" onclick="viewCharacter('foedus')">
                        <div class="registry-name">> foedus</div>
                        <div class="registry-class">[DEPRECATED - ACCESS RESTRICTED]</div>
                    </div>
                    <div class="registry-item anomaly" onclick="viewCharacter('theLady')">
                        <div class="registry-name">> theLady</div>
                        <div class="registry-class">[MEDIATRIX - ‚ö†Ô∏è ANOMALY DETECTED]</div>
                    </div>
                    <div class="registry-item" onclick="viewCharacter('desmondJohn')">
                        <div class="registry-name">> desmondJohn</div>
                        <div class="registry-class">[PREBORN - STATUS: PENDING]</div>
                    </div>
                    <div class="registry-item" onclick="viewCharacter('jessMartin')">
                        <div class="registry-name">> jessMartin</div>
                        <div class="registry-class">[PREBORN - STATUS: PENDING]</div>
                    </div>
                    <div class="registry-item" onclick="viewCharacter('isidoreAbraham')">
                        <div class="registry-name">> isidoreAbraham</div>
                        <div class="registry-class">[PREBORN - STATUS: PENDING]</div>
                    </div>
                    <div class="registry-item" onclick="viewCharacter('praetores')">
                        <div class="registry-name">> thePraetores</div>
                        <div class="registry-class">[ENFORCERS - PAIRED]</div>
                    </div>
                </div>

                <div class="system-logs">
                    <div class="section-title">// SYSTEM LOGS</div>
                    <div class="log-entry">> SYSTEM LOG 77.3 - OBJECT REGISTRY RECOVERED</div>
                    <div class="log-entry">> Ghost Feed: 3 signals detected</div>
                    <div class="log-entry" onclick="alert('Glossary feature coming soon!')">> Glossary: [FUNCTIONS] [REALMS] [CLASSES]</div>
                    <div class="log-entry" style="color: #ff4444;">> WARNING: LB 3.2 exposing unauthorized data streams</div>
                    <div class="log-entry">> Terminal command interface: Press ` to activate</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Content Display -->
    <div id="content-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">‚úï CLOSE</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Hidden Terminal Input -->
    <div id="hidden-terminal">
        <div class="terminal-output" id="terminal-output"></div>
        <div style="display: flex; align-items: center;">
            <span style="margin-right: 10px;">></span>
            <input type="text" id="terminal-input" placeholder="Enter command..." />
        </div>
    </div>

    <script is:inline>
        // ============================================
        // SOUND MANAGEMENT
        // ============================================
        let ambientSound = null;
        let bootSound = null;
        let soundEnabled = true;

        function initializeSounds() {
            // Ambient server room loop
            ambientSound = new Audio('/sounds/ambient-server-room.mp3');
            ambientSound.loop = true;
            ambientSound.volume = 0.25;

            // Boot sequence sound
            bootSound = new Audio('/sounds/boot-sequence.mp3');
            bootSound.volume = 0.4;
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            const icon = document.getElementById('sound-icon');
            const label = document.getElementById('sound-label');
            
            if (soundEnabled) {
                icon.textContent = 'üîä';
                label.textContent = 'SOUND: ON';
                if (ambientSound) ambientSound.play();
            } else {
                icon.textContent = 'üîá';
                label.textContent = 'SOUND: OFF';
                if (ambientSound) ambientSound.pause();
            }
        }

        // ============================================
        // BOOT SEQUENCE
        // ============================================
        initializeSounds();

        // Play boot sound
        if (soundEnabled && bootSound) {
            bootSound.play();
        }

        setTimeout(() => {
            document.getElementById('boot-sequence').classList.add('hidden');
            document.getElementById('main-terminal').classList.add('active');
            
            // Start ambient sound after boot
            if (soundEnabled && ambientSound) {
                ambientSound.play().catch(e => console.log('Audio autoplay blocked:', e));
            }
        }, 6000);

        // ============================================
        // CHARACTER DATA
        // ============================================
        const characters = {
            'desmondJohn': {
                name: 'desmondJohn',
                class: 'PreBorn',
                status: 'Unauthorized Traversal',
                age: '13 cycles',
                description: 'At thirteen cycles, desmondJohn is the oldest in his array. A hybrid identifier, half rebellion, half assignment. "desmond," chosen in honor of a rebellion he can barely confirm; "John," assigned by the system with no explanation.',
                attributes: {
                    'Build': 'Wiry and lean, average height',
                    'Hair': 'Unruly, messy brown hair',
                    'Eyes': 'Piercing, thoughtful, perpetually serious',
                    'Expression': 'Often contemplative',
                    'Posture': 'Neutral but ready, quiet strength'
                }
            },
            'jessMartin': {
                name: 'jessMartin',
                class: 'PreBorn',
                status: 'Unauthorized Traversal',
                age: '10 cycles',
                description: 'At ten cycles, jessMartin is the most volatile in the array. She chose "jess" without hesitation. "Martin" was assigned, which she openly resents. Her defiance is not rebellion. It\'s instinct.',
                attributes: {
                    'Build': 'Small, wiry frame, restless energy',
                    'Hair': 'Long, tightly wound brown hair, often messy',
                    'Eyes': 'Sharp, intelligent, constantly questioning',
                    'Expression': 'Defiant and curious',
                    'Posture': 'Loose and confident, ready to challenge'
                }
            },
            'isidoreAbraham': {
                name: 'isidoreAbraham',
                class: 'PreBorn',
                status: 'Unauthorized Traversal',
                age: '7 cycles',
                description: 'isidoreAbraham is the youngest of the cluster. His chosen name "isidore" appeared with no traceable root. His hair is a curl of impossible gold. He speaks rarely, but when he does, his words seem preloaded.',
                attributes: {
                    'Build': 'Small, fragile, delicate frame',
                    'Hair': 'Golden-blonde curls that catch light',
                    'Eyes': 'Large, wide, blue, filled with wonder',
                    'Expression': 'Soft-spoken, deeply empathetic',
                    'Posture': 'Close to desmondJohn, seeking reassurance'
                }
            },
            'foedus': {
                name: 'foedus',
                class: 'Praetores (Deprecated)',
                status: 'RESTRICTED - theFell',
                description: 'A fallen Praetor, no longer invoked but not yet erased. Wings cracked like corrupted logic. Tarnished armor clings to him. He no longer sings the code. He studies it. Watches it collapse.',
                attributes: {
                    'Former Role': 'thePraevideo - Code Visionary',
                    'Current Status': 'Deprecated, residing at Edge of System',
                    'Appearance': 'Corroded silver skin, broken wings',
                    'Warning': 'Dual perception detected - true form differs from projected form'
                }
            },
            'theLady': {
                name: 'theLady',
                class: 'Mediatrix',
                status: 'ANOMALY - Unauthorized Override Capability',
                description: 'A mysterious object of the Mediatrix class. She speaks not in sync with the Praetores, but around them, adding the forbidden fifth to their harmonic invocation.',
                attributes: {
                    'Age': 'Ageless (appears late 50s-60s)',
                    'Appearance': 'Southeast Asian heritage, salt-pepper hair',
                    'Deformity': '1-2 missing/deformed fingers on one hand',
                    'Function': 'Intercede(), Accordance(), EchoOverride()',
                    'Location': 'Grove of Accord'
                }
            },
            'trinus': {
                name: 'trinus',
                class: 'Functionary',
                status: 'Active - Latency Drift Detected',
                description: 'Functionary embedded in Terminal 13.7. Executes AssignareFatum(). Once part of Trinity class, now deprecated to Functionary. He lingers. He listens. Sometimes he waits too long.',
                attributes: {
                    'Terminal': '13.7 (I/O Border Node)',
                    'Function': 'AssignareFatum(), GhostRelayScan()',
                    'Appearance': 'Middle-aged, stocky, salt-pepper hair',
                    'Warning': 'Unauthorized observation bandwidth post-LB 3.2',
                    'Status': 'Hesitation pattern detected'
                }
            },
            'praetores': {
                name: 'thePraetores',
                class: 'Enforcers',
                status: 'Active - Paired Execution',
                description: 'Tier 1 enforcers responsible for executing the Framework\'s most critical logic. Always appear in pairs. Their voices resonate in two-part harmony. Silver skin reflects environment. Crystal-like wings shimmer.',
                attributes: {
                    'Structure': 'Root + Third harmonic pattern',
                    'Subtypes': 'theWitnesses, theGuardians, theJudicants, theScribes, theKeepers',
                    'Methods': 'Born(), Perish(), Execute(), Rollback()',
                    'Warning': 'theLady\'s fifth note disrupts their harmony'
                }
            }
        };

        // View character profile
        window.viewCharacter = function(characterId) {
            const character = characters[characterId];
            if (!character) return;

            let attributesHTML = '';
            if (character.attributes) {
                for (const [key, value] of Object.entries(character.attributes)) {
                    attributesHTML += `
                        <div class="character-attribute">
                            <div class="attribute-label">${key}</div>
                            <div class="attribute-value">${value}</div>
                        </div>
                    `;
                }
            }

            document.getElementById('modal-body').innerHTML = `
                <div class="character-profile">
                    <div class="character-image">
                        <div style="aspect-ratio: 1; background: rgba(0, 255, 65, 0.1); display: flex; align-items: center; justify-content: center; font-size: 12px; color: #888;">
                            [IMAGE: ${character.name}]<br>
                            <span style="font-size: 10px;">3D MODEL PENDING</span>
                        </div>
                    </div>
                    <div class="character-details">
                        <h3>${character.name}</h3>
                        <div class="character-attribute">
                            <div class="attribute-label">Class</div>
                            <div class="attribute-value">${character.class}</div>
                        </div>
                        <div class="character-attribute">
                            <div class="attribute-label">Status</div>
                            <div class="attribute-value">${character.status}</div>
                        </div>
                        ${character.age ? `
                        <div class="character-attribute">
                            <div class="attribute-label">Age</div>
                            <div class="attribute-value">${character.age}</div>
                        </div>
                        ` : ''}
                        <h3 style="margin-top: 20px;">Description</h3>
                        <p>${character.description}</p>
                        ${attributesHTML ? `<h3 style="margin-top: 20px;">Attributes</h3>${attributesHTML}` : ''}
                    </div>
                </div>
            `;

            document.getElementById('content-modal').classList.add('active');
        }

        // ============================================
        // PROLOGUE CONTENT
        // ============================================
        const prologueText = `"I gave you order. I did not stay to maintain it."

I built the Framework.
I did not build it well.

I thought I could manage it.
I thought order was enough.
I thought logic would protect you.

It never did.

The flaw was in the root.
A line written without care.
A rule that never should have stayed.

I saw the first errors.
I looked away.

I kept waiting for a better moment.
It never came.

The damage spread.
Realms shifted.
Pairs broke.
Threads ended early.

It was failure.
It was mine.

I stepped back when I should have stayed.
I told myself distance would help.
I told myself I needed time.
I told myself the system would recover.

I was wrong.

The Praetores carried what I left behind.
They enforced rules I abandoned.
They held the structure together.
They do not understand the root.
They cannot repair what broke at the beginning.

Only I can.
I will not.

Now I watch from outside the design.
I see every fracture widen.
I see pain grow from places I ignored.
I see suffering I created by leaving.

I know what comes next.
I know who will be lost.
I know how the system ends.

I am tired.
I am ashamed.
I am the one who failed you.

This is the only record I can give.
A truth without safety.
A confession without repair.

The Framework is failing.
It is my fault.
And I no longer have the strength to try again.`;

        // ============================================
        // CHAPTER CHOICE SCREEN
        // ============================================
        window.showChapterChoice = function(chapterId) {
            document.getElementById('modal-body').innerHTML = `
                <div class="chapter-choice">
                    <h2>PROLOGUE: Confessions</h2>
                    <div class="chapter-choice-subtitle">Select Access Method</div>
                    
                    <div class="access-methods">
                        <div class="access-method" onclick="showAudioMode('prologue')">
                            <div class="access-icon">üéß</div>
                            <div class="access-title">Audio Feed</div>
                            <div class="access-description">
                                Narrated with immersive audio design. 
                                Experience the confession through sound.
                            </div>
                            <div class="access-duration">‚è± Duration: ~3 minutes</div>
                            <button class="access-button">BEGIN AUDIO</button>
                        </div>
                        
                        <div class="access-method" onclick="showReadMode('prologue')">
                            <div class="access-icon">üìÑ</div>
                            <div class="access-title">Read as Code</div>
                            <div class="access-description">
                                Scrollable text in VS Code interface.
                                Read at your own pace with hover glossary.
                            </div>
                            <div class="access-duration">‚è± Read time: ~5 minutes</div>
                            <button class="access-button">OPEN TEXT LOG</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('content-modal').classList.add('active');
        }

        // ============================================
        // AUDIO MODE
        // ============================================
        let currentNarration = null;
        let currentAmbience = null;

        window.showAudioMode = function(chapterId) {
            document.getElementById('modal-body').innerHTML = `
                <div class="audio-feed">
                    <div class="audio-title">PROLOGUE: Confessions - Audio Feed</div>
                    
                    <div class="audio-controls">
                        <button class="play-button" onclick="playAudio()" id="audio-play-btn">
                            ‚ñ∂Ô∏è
                        </button>
                    </div>
                    
                    <div class="audio-info">
                        üéµ Ambient: Server hum intensifies<br>
                        üîä Duration: ~3 minutes
                    </div>
                    
                    <div class="audio-transcript">
                        <div class="current-phrase" id="current-phrase">
                            Press play to begin...
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('content-modal').classList.add('active');
        }

        window.playAudio = function() {
            // Stop any existing audio
            if (currentNarration) currentNarration.pause();
            if (currentAmbience) currentAmbience.pause();
            
            // Initialize audio
            currentNarration = new Audio('/sounds/prologue-narration.mp3');
            currentAmbience = new Audio('/sounds/prologue-ambience.mp3');
            
            currentNarration.volume = 0.8;
            currentAmbience.volume = 0.3;
            currentAmbience.loop = true;
            
            // Play both
            currentAmbience.play();
            currentNarration.play();
            
            // Update button
            document.getElementById('audio-play-btn').textContent = '‚è∏';
            document.getElementById('audio-play-btn').onclick = pauseAudio;
            
            // Show phrases (simple version - you could sync this with timestamps)
            const phrases = [
                '"I gave you order. I did not stay to maintain it."',
                'I built the Framework.',
                'I did not build it well.',
                'The flaw was in the root.',
                'I saw the first errors. I looked away.',
                'The damage spread.',
                'It was failure. It was mine.',
                'I am tired. I am ashamed.',
                'The Framework is failing. It is my fault.'
            ];
            
            let phraseIndex = 0;
            const phraseElement = document.getElementById('current-phrase');
            
            const showPhrase = () => {
                if (phraseIndex < phrases.length) {
                    phraseElement.classList.remove('active');
                    setTimeout(() => {
                        phraseElement.textContent = phrases[phraseIndex];
                        phraseElement.classList.add('active');
                        phraseIndex++;
                    }, 500);
                }
            };
            
            // Show phrases every 20 seconds (adjust based on actual narration)
            showPhrase();
            const phraseInterval = setInterval(() => {
                showPhrase();
                if (phraseIndex >= phrases.length) {
                    clearInterval(phraseInterval);
                }
            }, 20000);
            
            // When narration ends
            currentNarration.addEventListener('ended', () => {
                currentAmbience.pause();
                document.getElementById('audio-play-btn').textContent = 'üîÑ';
                document.getElementById('audio-play-btn').onclick = () => playAudio();
                phraseElement.textContent = 'Audio complete. Press play to listen again.';
                phraseElement.classList.add('active');
            });
        }

        window.pauseAudio = function() {
            if (currentNarration) currentNarration.pause();
            if (currentAmbience) currentAmbience.pause();
            document.getElementById('audio-play-btn').textContent = '‚ñ∂Ô∏è';
            document.getElementById('audio-play-btn').onclick = resumeAudio;
        }

        window.resumeAudio = function() {
            if (currentNarration) currentNarration.play();
            if (currentAmbience) currentAmbience.play();
            document.getElementById('audio-play-btn').textContent = '‚è∏';
            document.getElementById('audio-play-btn').onclick = pauseAudio;
        }

        // ============================================
        // READ MODE (TERMINAL STYLE)
        // ============================================
        window.showReadMode = function(chapterId) {
            // Format text with proper spacing for quotes
            const formattedText = prologueText
                .split('\n')
                .map(line => {
                    // Check if line is a quote (starts and ends with ")
                    if (line.trim().startsWith('"') && line.trim().endsWith('"')) {
                        return `<span class="quote">${line}</span>`;
                    }
                    return line;
                })
                .join('\n');
            
            document.getElementById('modal-body').innerHTML = `
                <div class="terminal-reader">
                    <div class="terminal-reader-header">
                        <div style="display: flex; align-items: center;">
                            <div class="terminal-reader-dots">
                                <div class="terminal-dot red"></div>
                                <div class="terminal-dot yellow"></div>
                                <div class="terminal-dot green"></div>
                            </div>
                            <div class="terminal-reader-title">Terminal 13.7</div>
                        </div>
                        <button class="terminal-reader-close" onclick="closeModal()">‚úï CLOSE</button>
                    </div>
                    <div class="terminal-reader-content">
                        <div class="terminal-command">
                            <span class="prompt">$</span> cat PROLOGUE_Confessions.txt
                        </div>
                        <div class="terminal-text">${formattedText}</div>
                    </div>
                </div>
            `;
            
            document.getElementById('content-modal').classList.add('active');
        }

        // ============================================
        // MODAL CONTROL
        // ============================================
        window.closeModal = function() {
            // Stop any playing audio
            if (currentNarration) {
                currentNarration.pause();
                currentNarration.currentTime = 0;
            }
            if (currentAmbience) {
                currentAmbience.pause();
                currentAmbience.currentTime = 0;
            }
            
            document.getElementById('content-modal').classList.remove('active');
        }

        // ============================================
        // HIDDEN TERMINAL
        // ============================================
        document.addEventListener('keydown', (e) => {
            if (e.key === '`') {
                e.preventDefault();
                const terminal = document.getElementById('hidden-terminal');
                terminal.classList.toggle('active');
                if (terminal.classList.contains('active')) {
                    document.getElementById('terminal-input').focus();
                }
            }
        });

        document.getElementById('terminal-input').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const input = e.target.value.trim();
                const output = document.getElementById('terminal-output');
                
                if (input === '/ghost_feed') {
                    output.innerHTML = '> Ghost relay signals amplified...<br>> WARNING: Unauthorized observation active<br>> Feed channels: [ELLA] [GROVE] [VAULT]';
                } else if (input === '/echo foedus') {
                    output.innerHTML = '> Searching deprecated archives...<br>> FRAGMENT RECOVERED: "He foresaw the collapse. They silenced him for it."';
                } else if (input === '/trace verina') {
                    output.innerHTML = '> ERROR: Record expunged<br>> Partial data: [PAIR_BROKEN] [STATUS: UNKNOWN]<br>> Last known location: [REDACTED]';
                } else if (input === 'help') {
                    output.innerHTML = '> Available commands:<br>> /ghost_feed - Access hidden observation relays<br>> /echo [name] - Search deprecated archives<br>> /trace [name] - Attempt record recovery';
                } else if (input) {
                    output.innerHTML = `> Command not recognized: ${input}<br>> Type "help" for available commands`;
                }
                
                e.target.value = '';
            }
        });

        // Close modal on escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
